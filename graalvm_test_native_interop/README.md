# GraalVM Test

This is a sample command-line application demonstrating how to use Dart's Java Native Interface (JNI) packages 
(`jni` and `jnigen`) to interoperate with Java code, specifically the GraalVM Polyglot API.

The application initializes a Java Virtual Machine (JVM) within a Dart environment, loads the necessary GraalVM JAR 
files, and then executes a simple JavaScript snippet using GraalVM's polyglot capabilities.

## How it Works

The core logic is in `bin/graalvm_test.dart`. It performs the following steps:

1.  **Spawns a JVM**: It uses `Jni.spawn()` to start a JVM, providing the paths to the required GraalVM JAR files 
located in the `mvn_jar` directory.
2.  **Creates a Polyglot Context**: It creates a GraalVM `Context` for the JavaScript language.
3.  **Executes JavaScript**: It evaluates a JavaScript string that defines a simple function.
4.  **Interoperates**: It calls the JavaScript function from Dart, passing a string argument ("World") to it. 
The JavaScript code then prints a message to the console.

The Dart bindings for the GraalVM Polyglot API (`org.graalvm.polyglot.Context` and `org.graalvm.polyglot.Value`) are 
generated by `jnigen` based on the configuration in `jnigen.yaml` and the Java source files in `mvn_java`.

## Requirements

*   Dart SDK
*   Java Development Kit (JDK) 17

## Setup

1.  **Get dependencies**:
    ```bash
    dart pub get
    ```

2.  **Generate JNI bindings**:
    This project uses `jnigen` to generate the Dart code for Java classes. 
    Run the following command to generate the necessary files:
    ```bash
    dart run jni:setup
    dart run jnigen:setup
    dart run jnigen --config jnigen.yaml
    ```
    The underlying graalvm libraries require OpenJDK 17 or higher. 

## Running the Application

After completing the setup steps, run the application with the following command:

```bash
dart run bin/graalvm_test.dart
```

You should see output from both Dart and the executed JavaScript code in your console.